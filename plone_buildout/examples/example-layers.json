{
    "Layers": [
        {
            "Type": "custom",
            "DefaultSecurityGroupNames": [
                "AWS-OpsWorks-Custom-Server"
            ],
            "Name": "***** APPLICATION LAYER TITLE *****",
            "Packages": [],
            "DefaultRecipes": {
                "Undeploy": [],
                "Setup": [
                    "opsworks_initial_setup",
                    "ssh_host_keys",
                    "ssh_users",
                    "mysql::client",
                    "dependencies",
                    "ebs",
                    "opsworks_ganglia::client"
                ],
                "Configure": [
                    "opsworks_ganglia::configure-client",
                    "ssh_users",
                    "agent_version"
                ],
                "Shutdown": [
                    "opsworks_shutdown::default"
                ],
                "Deploy": [
                    "deploy::default"
                ]
            },
            "CustomRecipes": {
                "Undeploy": [
                    "plone_buildout::instances-undeploy"
                ],
                "Setup": [
                    "plone_buildout::instances-setup"
                ],
                "Configure": [
                    "plone_buildout::instances-configure"
                ],
                "Shutdown": [
                    "plone_buildout::instances-stop"
                ],
                "Deploy": [
                    "plone_buildout::instances-deploy"
                ]
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Shortname": "plone_instances",
            "AutoAssignElasticIps": false
        },
        {
            "Type": "memcached",
            "Name": "Memcached",
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Shortname": "memcached",
            "AutoAssignElasticIps": false
        },
        {
            "Type": "lb",
            "Name": "HAProxy",
            "CustomRecipes": {
                "Undeploy": [],
                "Setup": [
                    "varnish::default",
                    "nginx::default"
                ],
                "Configure": [
                    "varnish::default",
                    "plone_buildout::nginx"
                ],
                "Shutdown": [],
                "Deploy": []
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Attributes": {
                "HaproxyHealthCheckUrl": "/misc_/CMFPlone/plone_icon",
                "HaproxyHealthCheckMethod": "HEAD",
                "HaproxyStatsPassword": "STATS PASSWORD",
                "HaproxyStatsUrl": "/haproxy?stats",
                "HaproxyStatsUser": "stats",
            },
            "Shortname": "lb",
            "AutoAssignElasticIps": true
        },
        {
            "Type": "custom",
            "Name": "DB Packing/Backups",
            "CustomRecipes": {
                "Undeploy": [],
                "Setup": [
                    "plone_buildout::enable_backups"
                ],
                "Configure": [
                    "plone_buildout::enable_backups"
                ],
                "Shutdown": [],
                "Deploy": [
                    "plone_buildout::enable_backups"
                ]
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Shortname": "maintenance",
            "AutoAssignElasticIps": false
        },
        {
            "Type": "custom",
            "Name": "Zeoserver",
            "CustomRecipes": {
                "Undeploy": [
                    "plone_buildout::zeoserver-undeploy"
                ],
                "Setup": [
                    "plone_buildout::zeoserver-setup"
                ],
                "Configure": [
                    "plone_buildout::zeoserver-configure"
                ],
                "Shutdown": [
                    "plone_buildout::zeoserver-stop"
                ],
                "Deploy": [
                    "plone_buildout::zeoserver-deploy"
                ]
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": true,
            "Shortname": "zeoserver",
            "AutoAssignElasticIps": false,
            "CustomSecurityGroupIds": [],
            "VolumeConfigurations": [
                {
                    "MountPoint": "/srv/www/zeoserver/shared/var",
                    "Size": 200,
                    "VolumeType": "standard",
                    "NumberOfDisks": 1
                }
            ]
        },
        {
            "Type": "custom",
            "Name": "Solr",
            "CustomRecipes": {
                "Undeploy": [
                    "plone_buildout::solr-undeploy"
                ],
                "Setup": [
                    "plone_buildout::solr-setup"
                ],
                "Configure": [
                    "plone_buildout::solr-configure"
                ],
                "Shutdown": [
                    "plone_buildout::solr-stop"
                ],
                "Deploy": [
                    "plone_buildout::solr-deploy"
                ]
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": true,
            "Shortname": "solr",
            "AutoAssignElasticIps": false,
            "CustomSecurityGroupIds": [],
            "VolumeConfigurations": [
                {
                    "MountPoint": "/srv/www/solr/shared/var",
                    "Size": 100,
                    "VolumeType": "standard",
                    "NumberOfDisks": 1
                }
            ]
        },
        {
            "Type": "custom",
            "Name": "EBS Snapshotting",
            "CustomRecipes": {
                "Undeploy": [],
                "Setup": [],
                "Configure": [
                    "plone_buildout::ebs_snapshots"
                ],
                "Shutdown": [],
                "Deploy": []
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Shortname": "ebs_snapshots",
            "AutoAssignElasticIps": false
        },
        {
            "Type": "custom",
            "Name": "Shared Blobs",
            "CustomRecipes": {
                "Undeploy": [],
                "Setup": [
                    "plone_buildout::nfs_blobs"
                ],
                "Configure": [
                    "plone_buildout::nfs_blobs"
                ],
                "Shutdown": [],
                "Deploy": []
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": true,
            "Shortname": "shared_blobs",
            "AutoAssignElasticIps": false,
            "VolumeConfigurations": [
                {
                    "MountPoint": "/srv/exports",
                    "Size": 200,
                    "VolumeType": "standard",
                    "NumberOfDisks": 1
                }
            ]
        },
        {
            "Type": "custom",
            "Name": "Redis",
            "CustomRecipes": {
                "Undeploy": [],
                "Setup": [
                    "redis::default"
                ],
                "Configure": [],
                "Shutdown": [],
                "Deploy": []
            },
            "AutoAssignPublicIps": true,
            "EnableAutoHealing": true,
            "UseEbsOptimizedInstances": false,
            "Shortname": "redis",
            "AutoAssignElasticIps": false
        }
    ]
}
